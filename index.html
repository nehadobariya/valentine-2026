<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Valentine Protocol | v1.3</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap" rel="stylesheet">
    <style>
      /* Prevents the main page from scrolling and handles mobile browser bars */
      html,
      body {
        height: 100%;
        height: 100dvh;
        overflow: hidden;
        font-family: "Fira Code", monospace;
        background-color: #0d1117;
        color: #c9d1d9;
      }
      .terminal-glow {
        box-shadow: 0 0 25px rgba(236, 72, 153, 0.1);
      }
      .glass {
        background: rgba(22, 27, 34, 0.9);
        backdrop-filter: blur(12px);
        border: 1px solid #30363d;
      }
      .error-shake {
        animation: shake 0.2s ease-in-out;
        border-color: #ef4444 !important;
      }
      @keyframes shake {
        0%,
        100% {
          transform: translateX(0);
        }
        25% {
          transform: translateX(-5px);
        }
        75% {
          transform: translateX(5px);
        }
      }
      .animate-in {
        animation: fadeIn 0.3s ease-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(5px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Heart Glow and Beat Animation */
      .heart-beat {
        display: inline-block;
        animation: heartBeat 1.5s infinite ease-in-out;
        filter: drop-shadow(0 0 10px rgba(34, 197, 94, 0.6));
      }

      @keyframes heartBeat {
        0% { transform: scale(1); filter: drop-shadow(0 0 5px rgba(34, 197, 94, 0.4)); }
        50% { transform: scale(1.2); filter: drop-shadow(0 0 20px rgba(34, 197, 94, 0.8)); }
        100% { transform: scale(1); filter: drop-shadow(0 0 5px rgba(34, 197, 94, 0.4)); }
      }

      .custom-scroll::-webkit-scrollbar {
        width: 4px;
      }
      .custom-scroll::-webkit-scrollbar-track {
        background: transparent;
      }
      .custom-scroll::-webkit-scrollbar-thumb {
        background: #30363d;
        border-radius: 10px;
      }

      /* Fix for mobile keyboard pushing content */
      @media (max-height: 600px) {
        .hide-on-keyboard {
          display: none;
        }
        header {
          margin-bottom: 0.5rem !important;
        }
      }
    </style>
</head>
<body>

    <div class="app-wrapper p-3 md:p-8">
        
        <header class="flex justify-between items-end border-b border-gray-800 pb-3 mb-3 flex-shrink-0">
            <div>
                <h1 class="text-lg md:text-xl font-bold text-pink-500 tracking-tight">~/init.sh</h1>
                <p class="text-[10px] text-gray-500 uppercase">Status: <span class="animate-pulse text-green-500">‚óè Live</span></p>
            </div>
            <div class="text-right hidden sm:block">
                <p class="text-[10px] text-pink-400 italic">Auth: Fianc√©e</p>
            </div>
        </header>

        <div class="flex-grow flex flex-col overflow-hidden">
            <div class="glass rounded-xl flex flex-col h-full overflow-hidden terminal-glow border-pink-900/30">
                
                <div class="bg-[#161b22] px-4 py-2 border-b border-gray-800 flex-shrink-0 flex items-center">
                    <div class="flex space-x-1.5 mr-4">
                        <div class="w-2.5 h-2.5 rounded-full bg-red-500/40"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/40"></div>
                        <div class="w-2.5 h-2.5 rounded-full bg-green-500/40"></div>
                    </div>
                    <span id="title-bar" class="text-[10px] text-gray-500 font-mono italic truncate">config.json</span>
                </div>

                <div id="content-area" class="p-4 md:p-10 flex-grow overflow-y-auto custom-scroll">
                    </div>

                <div class="bg-[#0d1117] p-4 flex justify-between items-center border-t border-gray-800 flex-shrink-0">
                    <button onclick="handlePrev()" id="prev-btn" class="bg-gray-800 text-gray-300 px-4 py-2 rounded text-[10px] font-bold disabled:opacity-0">
                        ‚Üê BACK
                    </button>
                    
                    <div class="text-[10px] font-mono text-gray-600 font-bold uppercase">
                        STEP <span id="step-num" class="text-pink-500">1</span>/8
                    </div>

                    <button onclick="handleNext()" id="next-btn" class="bg-pink-600 text-white px-5 py-2 rounded text-[10px] font-bold uppercase tracking-wider">
                        Next ‚Üí
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const GOOGLE_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbyVB0YaVmV8jXMszYZ1dU_s0Uh7Bn5llXwjsVP_eSrci6jZqW8diaxqYoaLWivmqIa61Q/exec"; 

        const days = [
            { date: "Feb 7 - Rose Day", icon: "ü™∑", message: "I love flowers, especially Lotus and Roses. I want our future to fragrance same as lots of flowers. Since this is my first Valentine, I'm excited!", question: "Select Path:<br>[A] <b>'Pair-Mode'</b>: Flower hunting together.<br>[B] <b>'Custom Script'</b>: Your unique idea.<br><br>Which protocol?", key: "rose_day" },
            { date: "Feb 8 - Propose Day", icon: "üíç", message: "My first Propose Day with you. You have 'admin access' to my heart.", question: "What's the most 'us' way to celebrate? Special meal or deep talk?", key: "propose_day" },
            { date: "Feb 9 - Chocolate Day", icon: "üç´", message: "You make the bitter bugs sweet. I want to know your flavor.", question: "What is your favorite sugar-boost?", key: "chocolate_day" },
            { date: "Feb 10 - Teddy Day", icon: "üß∏", message: "I need your presence when code doesn't compile.", question: "Movie night or ergonomic pillow?", key: "teddy_day" },
            { date: "Feb 11 - Promise Day", icon: "ü§ù", message: "A Promise is a guarantee. I'll be your debugger.", question: "One life-feature you promise to work on with me?", key: "promise_day" },
            { date: "Feb 12 - Hug Day", icon: "ü´Ç", message: "Hugs are the best system reboots.", question: "Minimum hugs per day requirement?", key: "hug_day" },
            { date: "Feb 13 - Kiss Day", icon: "üíã", message: "Syncing our hearts.", question: "Morning coffee or stargazing?", key: "kiss_day" },
            { date: "Feb 14 - Valentine's Day", icon: "‚ú®", message: "Final Deployment! No hype, just us.", question: "Describe your perfect 'No-Fluff' date.", key: "valentine_main" }
        ];

        let step = 0;
        let responses = {};

        function render() {
            const current = days[step];
            document.getElementById('step-num').innerText = step + 1;
            document.getElementById('title-bar').innerText = `module_${current.key}.json`;
            document.getElementById('prev-btn').disabled = (step === 0);
            const savedValue = responses[current.date] || "";

            document.getElementById('content-area').innerHTML = `
                <div class="animate-in">
                    <div class="flex items-center space-x-3 mb-4">
                        <span class="text-3xl">${current.icon}</span>
                        <h2 class="text-base font-bold text-white uppercase">${current.date}</h2>
                    </div>
                    <p class="text-gray-400 text-xs leading-relaxed mb-6 border-l-2 border-pink-500/50 pl-3">
                        "${current.message}"
                    </p>
                    <div class="space-y-4">
                        <p class="text-[10px] text-pink-500 font-bold underline italic">// INPUT_REQUIRED</p>
                        <p class="text-xs text-gray-300">${current.question}</p>
                        <textarea id="input-field" class="w-full bg-[#0d1117] border border-gray-800 rounded-lg p-3 text-emerald-400 focus:outline-none focus:border-pink-500 text-sm font-mono" rows="3">${savedValue}</textarea>
                    </div>
                </div>
            `;
        }

        function handleNext() {
            const input = document.getElementById('input-field');
            if (!input.value.trim()) {
                input.classList.add('error-shake');
                setTimeout(() => input.classList.remove('error-shake'), 300);
                return;
            }
            responses[days[step].date] = input.value.trim();
            if (step < days.length - 1) { step++; render(); } else { finish(); }
        }

        function handlePrev() {
            if (step > 0) {
                responses[days[step].date] = document.getElementById('input-field').value;
                step--; render();
            }
        }

        function finish() {
            document.getElementById('next-btn').style.display = 'none';
            document.getElementById('prev-btn').style.display = 'none';
            const area = document.getElementById('content-area');
            area.innerHTML = `
                <div class="text-center py-10 animate-in">
                    <div class="text-5xl mb-6">üöÄ</div>
                    <h2 class="text-xl font-bold text-pink-500 mb-2 uppercase">Ready</h2>
                    <p class="text-xs text-gray-400 mb-8 max-w-sm mx-auto">Confirm final push to send configuration to Fianc√©e.</p>
                    <button onclick="sendToGoogleScript()" id="final-push" class="bg-blue-600 text-white px-10 py-4 rounded-full font-bold text-[10px] tracking-widest uppercase">
                        Confirm Push
                    </button>
                </div>
            `;
        }

        async function sendToGoogleScript() {
            const btn = document.getElementById('final-push');
            btn.innerText = "DEPLOYING...";
            btn.disabled = true;
            try {
                await fetch(GOOGLE_SCRIPT_URL, { method: 'POST', mode: 'no-cors', body: JSON.stringify(responses) });
                document.getElementById('content-area').innerHTML = `
                    <div class="text-center animate-in py-20">
                        <div class="text-5xl md:text-6xl mb-6 heart-beat">üíö</div>
                        <h2 class="text-xl md:text-2xl font-bold text-green-500 mb-2 uppercase italic">Success</h2>
                        <div class="space-y-4 max-w-md mx-auto px-2">
                            <p class="text-[11px] md:text-sm text-gray-300 leading-relaxed font-sans">
                                My dear Fianc√©, since this is my first Valentine, I was so nervous and excited to build this for you. 
                                Thank you for being the 'Main Thread' in my life's execution. I can't wait to turn these configurations into real-world memories. üíñ
                            </p>

                            <p class="text-[10px] md:text-xs text-emerald-500 font-mono italic mt-4">
                                // System Status: Forever Yours <br>
                                // Love.exe is running perfectly...
                            </p>
                        </div>
                    </div>`;
            } catch (error) {
                btn.innerText = "RETRY";
                btn.disabled = false;
            }
        }

        render();
    </script>
</body>
</html>
