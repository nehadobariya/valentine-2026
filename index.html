<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>Valentine Protocol | v1.5 Fixed</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
      href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      :root {
        --sat: env(safe-area-inset-top);
        --sab: env(safe-area-inset-bottom);
      }
      html,
      body {
        height: 100%;
        margin: 0;
        overflow: hidden;
        font-family: "Fira Code", monospace;
        background-color: #0d1117;
        color: #c9d1d9;
      }
      .app-wrapper {
        height: 100dvh;
        display: flex;
        flex-direction: column;
        padding: 1rem;
        padding-top: calc(1rem + var(--sat));
        padding-bottom: calc(1rem + var(--sab));
      }
      .terminal-glow {
        box-shadow: 0 0 25px rgba(236, 72, 153, 0.15);
      }
      .glass {
        background: rgba(22, 27, 34, 0.9);
        backdrop-filter: blur(12px);
        border: 1px solid #30363d;
      }
      .animate-in {
        animation: fadeIn 0.4s ease-out;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* --- ERROR SHAKE CLASSES --- */
      .error-shake {
        animation: shake 0.2s ease-in-out;
        border-color: #ef4444 !important;
      }
      @keyframes shake {
        0%, 100% { transform: translateX(0); }
        25% { transform: translateX(-5px); }
        75% { transform: translateX(5px); }
      }
      /* -------------------------- */

      .heart-beat {
        display: inline-block;
        animation: heartBeat 1.5s infinite ease-in-out;
      }
      @keyframes heartBeat {
        0% {
          transform: scale(1);
          filter: drop-shadow(0 0 5px rgba(34, 197, 94, 0.4));
        }
        50% {
          transform: scale(1.2);
          filter: drop-shadow(0 0 20px rgba(34, 197, 94, 0.8));
        }
        100% {
          transform: scale(1);
          filter: drop-shadow(0 0 5px rgba(34, 197, 94, 0.4));
        }
      }

      .custom-scroll::-webkit-scrollbar {
        width: 4px;
      }
      .custom-scroll::-webkit-scrollbar-thumb {
        background: #30363d;
        border-radius: 10px;
      }
    </style>
  </head>
  <body>
    <div class="app-wrapper max-w-6xl mx-auto">
      <header
        class="flex justify-between items-end border-b border-gray-800 pb-3 mb-4 flex-shrink-0"
      >
        <div>
          <h1 class="text-lg md:text-xl font-bold text-pink-500 tracking-tight">
            ~/valentine_init.sh
          </h1>
          <p class="text-[10px] text-gray-500 uppercase">
            Status:
            <span class="animate-pulse text-green-500 font-bold">‚óè Active</span>
          </p>
        </div>
        <div class="text-right hidden sm:block">
            <p class="text-[10px] md:text-[11px] text-gray-500 uppercase tracking-widest font-semibold opacity-70">Target: My Favorite Developer</p>
          <p class="text-[10px] text-pink-400 italic font-semibold">
            Auth: Fianc√©e (Excited Level 100%)
          </p>
        </div>
      </header>

      <div
        class="flex flex-col md:grid md:grid-cols-3 gap-4 flex-grow overflow-hidden"
      >
        <div class="flex flex-col h-32 md:h-full flex-shrink-0">
          <div
            class="glass p-4 rounded-lg h-full border-pink-900/20 flex flex-col overflow-hidden"
          >
            <h3
              class="text-[10px] font-bold text-pink-500 uppercase mb-2 border-b border-gray-800 pb-1 tracking-widest"
            >
              System Logs
            </h3>
            <div
              class="space-y-2 text-[10px] md:text-[11px] leading-tight overflow-y-auto custom-scroll pr-1"
            >
              <p class="text-blue-400">[0.001] Instance Created.</p>
              <p class="text-purple-400">[0.005] High excitement detected.</p>
              <p
                class="text-gray-400 italic my-2 border-l-2 border-pink-500 pl-2"
              >
                "Since it's our first, I wanted it to be unique. No fluff, just
                our logic."
              </p>
              <p class="text-emerald-500/80">[0.009] LOTUS & ROSE loaded.</p>
            </div>
          </div>
        </div>

        <div class="md:col-span-2 flex flex-col flex-grow overflow-hidden">
          <div
            class="glass rounded-xl flex flex-col h-full overflow-hidden terminal-glow border-pink-900/30"
          >
            <div
              class="bg-[#161b22] px-4 py-2 border-b border-gray-800 flex-shrink-0 flex items-center"
            >
              <div class="flex space-x-1.5 mr-4">
                <div class="w-2.5 h-2.5 rounded-full bg-red-500/40"></div>
                <div class="w-2.5 h-2.5 rounded-full bg-yellow-500/40"></div>
                <div class="w-2.5 h-2.5 rounded-full bg-green-500/40"></div>
              </div>
              <span
                id="title-bar"
                class="text-[10px] text-gray-400 font-mono italic"
                >module_rose_day.cfg</span
              >
            </div>

            <div
              id="content-area"
              class="p-4 md:p-8 flex-grow overflow-y-auto custom-scroll"
            ></div>

            <div
              class="bg-[#0d1117] p-4 flex justify-between items-center border-t border-gray-800 flex-shrink-0"
            >
              <button
                onclick="handlePrev()"
                id="prev-btn"
                class="bg-gray-800 text-gray-300 px-4 py-2 rounded text-[10px] font-bold disabled:opacity-0"
              >
                ‚Üê BACK
              </button>

              <div
                class="text-[10px] font-mono text-gray-600 font-bold uppercase"
              >
                STEP <span id="step-num">1</span>/8
              </div>

              <button
                onclick="handleNext()"
                id="next-btn"
                class="bg-pink-600 hover:bg-pink-500 text-white px-5 py-2 rounded text-[10px] font-bold uppercase tracking-wider"
              >
                Next ‚Üí
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      const GOOGLE_SCRIPT_URL =
        "https://script.google.com/macros/s/AKfycbyVB0YaVmV8jXMszYZ1dU_s0Uh7Bn5llXwjsVP_eSrci6jZqW8diaxqYoaLWivmqIa61Q/exec";

      const days = [
        {
          date: "Feb 7 - Rose Day",
          icon: "ü™∑",
          message:
            "I absolutely love flowers, especially the purity of a Lotus and the classic Rose. I dream of a future for us that carries that same lasting fragrance. Since this is my first Valentine, I'm so excited to start it with this fresh scent.",
          question:
            "Select Execution Path:<br>[A] <b>'Pair-Mode'</b>: We go flower hunting together.<br>[B] <b>'Custom Script'</b>: You have a different, unique idea for us.<br><br>Which protocol should we deploy?",
          key: "rose_day",
        },
        {
          date: "Feb 8 - Propose Day",
          icon: "üíç",
          message:
            "This is my first time celebrating 'Propose Day' and it feels so right doing it with you. You've already gained 'admin access' to my heart, but I want to officially commit to our future today.",
          question:
            "In your eyes, what's the most 'us' way to celebrate a commitment? A special meal, or a deep talk about our next 10 years?",
          key: "propose_day",
        },
        {
          date: "Feb 9 - Chocolate Day",
          icon: "üç´",
          message:
            "Life with a dev can be bitter like dark cocoa, but you make it sweet. Being my first Valentine, I want to know your flavor.",
          question:
            "What is your absolute favorite 'sugar-boost' that we should treat ourselves to today?",
          key: "chocolate_day",
        },
        {
          date: "Feb 10 - Teddy Day",
          icon: "üß∏",
          message:
            "I don't need a giant stuffed toy; I just need the comfort of your presence when my code doesn't compile.",
          question:
            "What's our version of a 'Teddy'? A cozy movie night or a new ergonomic pillow?",
          key: "teddy_day",
        },
        {
          date: "Feb 11 - Promise Day",
          icon: "ü§ù",
          message:
            "In JS, a Promise is a guarantee. I promise to always be your debug partner and your biggest cheerleader. I'm so excited to make this promise to you officially.",
          question:
            "What is one 'Life-Feature' you promise to always work on with me And What are 'non-negotiable' promises you want to add to our relationship documentation?",
          key: "promise_day",
        },
        {
          date: "Feb 12 - Hug Day",
          icon: "ü´Ç",
          message:
            "Sometimes a physical 'reboot' (a hug) is all we need to fix a bad day. I'm looking forward to many of these during our first Valentine week.",
          question:
            "How many 'hugs per day' should be our minimum system requirement?",
          key: "hug_day",
        },
        {
          date: "Feb 13 - Kiss Day",
          icon: "üíã",
          message:
            "The most beautiful way to sync our hearts. Since it's my first Valentine, I'm realizing that the small gestures are the ones that matter most.",
          question:
            "What's the best time for our 'Sync Session'‚Äîmorning coffee or late-night stargazing?",
          key: "kiss_day",
        },
        {
          date: "Feb 14 - Valentine's Day",
          icon: "‚ú®",
          message:
            "Final Deployment! I know you aren't big on 'Western' culture, and I love that about you. But since this is my first one, I'm just so happy to spend it with you. No rules, no hype, just us.",
          question:
            "How shall we execute our final launch? Describe your perfect, simple, 'No-Marketing-Fluff' date.",
          key: "valentine_main",
        },
      ];

      let step = 0;
      let responses = {};

      function render() {
        const current = days[step];
        document.getElementById("step-num").innerText = step + 1;
        document.getElementById("title-bar").innerText =
          `module_${current.key}.json`;
        document.getElementById("prev-btn").disabled = step === 0;
        const savedValue = responses[current.date] || "";

        document.getElementById("content-area").innerHTML = `
                <div class="animate-in">
                    <div class="flex items-center space-x-3 mb-4">
                        <span class="text-3xl">${current.icon}</span>
                        <h2 class="text-base font-bold text-white uppercase tracking-widest">${current.date}</h2>
                    </div>
                    <p class="text-gray-400 text-xs leading-relaxed mb-6 border-l-2 border-pink-500/50 pl-3 font-sans">
                        "${current.message}"
                    </p>
                    <div class="space-y-4">
                        <p class="text-[10px] text-pink-500 font-bold tracking-[0.2em] underline">// REQUIREMENT_FIELD</p>
                        <p class="text-xs text-gray-300 font-medium leading-relaxed">${current.question}</p>
                        <textarea id="input-field" required class="w-full bg-[#0d1117] border border-gray-800 rounded-lg p-3 text-emerald-400 focus:outline-none focus:border-pink-500 text-sm font-mono" rows="3">${savedValue}</textarea>
                    </div>
                </div>
            `;
        if (window.innerWidth > 768)
          document.getElementById("input-field").focus();
      }

      function handleNext() {
        const input = document.getElementById("input-field");
        if (!input.value.trim()) {
          input.classList.add("error-shake");
          setTimeout(() => input.classList.remove("error-shake"), 300);
          return;
        }
        responses[days[step].date] = input.value.trim();
        if (step < days.length - 1) {
          step++;
          render();
        } else {
          finish();
        }
      }

      function handlePrev() {
        if (step > 0) {
          responses[days[step].date] =
            document.getElementById("input-field").value;
          step--;
          render();
        }
      }

      function finish() {
        document.getElementById("next-btn").style.display = "none";
        document.getElementById("prev-btn").style.display = "none";
        const area = document.getElementById("content-area");
        area.innerHTML = `
                <div class="text-center py-6 animate-in m-auto">
                    <div class="text-5xl mb-4">üöÄ</div>
                    <h2 class="text-xl font-bold text-pink-500 mb-2 uppercase underline">Ready to Deploy</h2>
                    <p class="text-[10px] md:text-xs text-gray-400 mb-8 max-w-sm mx-auto">Confirm final push to send configuration to Fianc√©e.</p>
                    <button onclick="sendToGoogleScript()" id="final-push" class="bg-blue-600 hover:bg-blue-500 text-white px-10 py-4 rounded-full font-bold text-[10px] tracking-[0.3em] uppercase">
                        Confirm Final Push
                    </button>
                </div>
            `;
      }

      async function sendToGoogleScript() {
        const btn = document.getElementById("final-push");
        btn.innerText = "DEPLOYING...";
        btn.disabled = true;
        try {
          await fetch(GOOGLE_SCRIPT_URL, {
            method: "POST",
            mode: "no-cors",
            body: JSON.stringify(responses),
          });

          document.getElementById("content-area").innerHTML = `
                    <div class="text-center animate-in py-4 flex flex-col items-center justify-center h-full m-auto">
                        <div class="text-5xl md:text-6xl mb-4 heart-beat">üíö</div>
                        <h2 class="text-xl md:text-2xl font-bold text-green-500 mb-4 uppercase italic">Success</h2>
                        <div class="space-y-4 max-w-md mx-auto px-2 text-center">
                            <p class="text-[11px] md:text-sm text-gray-300 leading-relaxed font-sans">
                                My dear Fianc√©, thank you for being the 'Main Thread' in my life's execution. I can't wait to turn these configurations into real-world memories. üíñ
                            </p>
                            <p class="text-[10px] md:text-xs text-emerald-500 font-mono italic mt-4">
                                // System Status: Forever Yours <br>
                                // Love.exe is running perfectly...
                            </p>
                        </div>
                    </div>`;
        } catch (error) {
          btn.innerText = "RETRY";
          btn.disabled = false;
        }
      }

      render();
    </script>
  </body>
</html>
